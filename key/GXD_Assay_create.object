#!/bin/sh

#
# History
#
# 09/03/2009    lec
#       - TR 9797/Cre; added ALL_Cre_Cache
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

ALTER TABLE mgd.GXD_Assay ADD PRIMARY KEY (_Assay_key);


ALTER TABLE mgd.ALL_Cre_Cache ADD FOREIGN KEY (_Assay_key) REFERENCES mgd.GXD_Assay ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.GXD_GelLane ADD FOREIGN KEY (_Assay_key) REFERENCES mgd.GXD_Assay ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.GXD_Specimen ADD FOREIGN KEY (_Assay_key) REFERENCES mgd.GXD_Assay ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.GXD_GelRow ADD FOREIGN KEY (_Assay_key) REFERENCES mgd.GXD_Assay ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.GXD_Expression ADD FOREIGN KEY (_Assay_key) REFERENCES mgd.GXD_Assay ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.GXD_AssayNote ADD FOREIGN KEY (_Assay_key) REFERENCES mgd.GXD_Assay ON DELETE CASCADE DEFERRABLE;


EOSQL
