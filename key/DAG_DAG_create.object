#!/bin/sh

#
# History
#
#
# 02/25/2014    sc
#       - TR11560 - added MGI_Relationship_Category FK
#
# 10/19/2006	lec
#	- TR 6812; added VOC_GO_Cache
#
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

ALTER TABLE mgd.DAG_DAG ADD PRIMARY KEY (_DAG_key);


ALTER TABLE mgd.DAG_Closure ADD FOREIGN KEY (_DAG_key) REFERENCES mgd.DAG_DAG ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.DAG_Edge ADD FOREIGN KEY (_DAG_key) REFERENCES mgd.DAG_DAG ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.DAG_Node ADD FOREIGN KEY (_DAG_key) REFERENCES mgd.DAG_DAG ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.VOC_GO_Cache ADD FOREIGN KEY (_DAG_key) REFERENCES mgd.DAG_DAG ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.VOC_VocabDAG ADD FOREIGN KEY (_DAG_key) REFERENCES mgd.DAG_DAG ON DELETE CASCADE DEFERRABLE;


ALTER TABLE mgd.MGI_Relationship_Category ADD FOREIGN KEY (_RelationshipDAG_key) REFERENCES mgd.DAG_DAG DEFERRABLE;


EOSQL
