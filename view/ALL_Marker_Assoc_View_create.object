#!/bin/csh -f

#
# History
#
# 07/14/2011	lec
#	- convert to ansi outer join
#
# 02/25/2009	lec
#	- TR7493/gene traps less filling
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.ALL_Marker_Assoc_View
as
select a.*, m.symbol,
b.jnumID, 
b.numericPart as jnum, 
b.short_citation,
t.term as status,
u1.login as createdBy,
u2.login as modifiedBy
from ALL_Marker_Assoc a
	INNER JOIN MRK_Marker m on (a._Marker_key = m._Marker_key)
	INNER JOIN VOC_Term t on (a._Status_key = t._Term_key)
	INNER JOIN MGI_User u1 on (a._CreatedBy_key = u1._User_key)
	INNER JOIN MGI_User u2 on (a._ModifiedBy_key = u2._User_key)
	LEFT OUTER JOIN BIB_Citation_Cache b on (a._Refs_key = b._Refs_key)



;

EOSQL
