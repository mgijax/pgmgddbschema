#!/bin/csh -f

#
# History
#
# 05/21/2002	lec
#	- TR 1463; SAO
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.NOM_Marker_View
as
select n.*, 
       s.term as status, 
       e.event, 
       r.eventReason, 
       t.name as markerType, 
       c.term as curationState,
       u1.login as createdBy, 
       u2.login as modifiedBy, 
       u3.login as broadcastBy
from NOM_Marker n
     	INNER JOIN VOC_Term s on (n._NomenStatus_key = s._Term_key)
     	INNER JOIN MRK_Event e on (n._Marker_Event_key = e._Marker_Event_key)
     	INNER JOIN MRK_EventReason r on (n._Marker_EventReason_key = r._Marker_EventReason_key)
     	INNER JOIN MRK_Types t on (n._Marker_Type_key = t._Marker_Type_key)
     	INNER JOIN VOC_Term c on (n._CurationState_key = c._Term_key)
     	INNER JOIN MGI_User u1 on (n._CreatedBy_key = u1._User_key)
     	INNER JOIN MGI_User u2 on (n._ModifiedBy_key = u2._User_key)
     	LEFT OUTER JOIN MGI_User u3 on (n._BroadcastBy_key = u3._User_key)



;

EOSQL
