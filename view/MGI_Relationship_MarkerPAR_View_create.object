#!/bin/sh

#
# History
#
# 03/23/2023	lec
#	- fl2-253/PAR NCBI ID issue (part 7): Allow curators to add NCBI IDs (LDB=55) in the marker PWI module (only for PARtner_of markers)
#

cd `dirname $0` && . ./Configuration

${PG_MGD_DBSCHEMADIR}/view/MGI_Relationship_MarkerPAR_View_drop.object

cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.MGI_Relationship_MarkerPAR_View
as
select r.*, v1.name as categoryTerm, v2.term as relationshipTerm, v3.term as qualifierTerm, v4.term as evidenceTerm, m.symbol
from MGI_Relationship r, MGI_Relationship_Category v1, VOC_Term v2, VOC_Term v3, VOC_Term v4, MRK_Marker m
where r._Category_key = 1012
and r._Category_key = v1._Category_key
and r._RelationshipTerm_key = v2._Term_key
and r._Qualifier_key = v3._Term_key
and r._Evidence_key = v4._Term_key
and r._Object_key_1 = m._Marker_key
;

EOSQL
