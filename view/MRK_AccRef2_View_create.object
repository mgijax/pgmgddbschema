#!/bin/sh

#
# History
#
# 09/07/2010	lec
#	TR 10337
#	add view for these specific logical dbs:
#
#	60      EnsemblGeneModel
#	134     EnsemblProtein        
#	133     EnsemblTranscript       
#	55      EntrezGene
#	59      NCBIGeneModel
#       139     NCBIGeneModelEvidence
#	27      RefSeq
#	13      SWISSPROT
#	41      TrEMBL
#

cd `dirname $0` && . ./Configuration

${PG_MGD_DBSCHEMADIR}/view/MRK_AccRef2_View_drop.object

cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.MRK_AccRef2_View
as
select a.*, l.name as LogicalDB, 
m.name as MGIType, 
ar._Refs_key, 
b.numericPart as jnum, 
b.short_citation, 
b.jnumID,
u1.login as modifiedBy
from ACC_Accession a, ACC_LogicalDB l, ACC_MGIType m, ACC_AccessionReference ar, BIB_Citation_Cache b, MGI_User u1
where a._MGIType_key = 2
and a._Accession_key = ar._Accession_key
and a._LogicalDB_key = l._LogicalDB_key
and a._MGIType_key = m._MGIType_key
and ar._Refs_key = b._Refs_key
and a._ModifiedBy_key = u1._User_key
and a._LogicalDB_key in (55,27,59,139,60,133,134,13,41)



;

EOSQL
