#!/bin/sh

#
# History
#
# 08/20/2009	lec
#	- removed 'union' and replaced with outer join to Marker
#
# 03/02/2006	lec
#	- added chromosome
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.MLD_Expt_Marker_View
as
select distinct c.jnumID, 
       c.jnum, 
       c.short_citation, 
       m.symbol, 
       x.exptType, 
       x.tag, 
       e.*, 
       al.symbol as allele, 
       a.description as assay, 
       c._primary, 
       c.authors, 
       m.chromosome
from BIB_View c
	INNER JOIN MLD_Expts x on (c._Refs_key = x._Refs_key)
	INNER JOIN MLD_Expt_Marker e on (x._Expt_key = e._Expt_key)
        INNER JOIN MLD_Assay_Types a on (e._Assay_Type_key = a._Assay_Type_key)
        LEFT OUTER JOIN ALL_Allele al on (e._Allele_key = al._Allele_key)
        LEFT OUTER JOIN MRK_Marker m on (e._Marker_key = m._Marker_key)


;

EOSQL
