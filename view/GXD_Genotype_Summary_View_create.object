#!/bin/sh

#
# History
#
# 07/14/2011	lec
#	- convert to ansi outer join
#
# 08/18/2009	lec
#	- gene trap less filling
#	- change call to GXD_AllelePair_View 
#	to GXD_AllelePair1_View and GXD_AllelePair2
#
# 06/05/2002	lec
#	- TR 3677
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.GXD_Genotype_Summary_View
as
select a.*,
       g.mgiID as mgiID,
       g.strain as subType,
       g.strain || ' ' || ap.allele1 || ',' || ap.allele2 as description,
       ap.allele1 || ',' || ap.allele2 as short_description
from ACC_Accession a
     	INNER JOIN GXD_Genotype_View g on (a._Object_key = g._Genotype_key)
     	LEFT OUTER JOIN GXD_AllelePair_View ap on (g._Genotype_key = ap._Genotype_key)
where a._MGIType_key = 12



;

EOSQL
