#!/bin/sh

#
# History
#
# 05/21/2002	lec
#	- TR 1463; SAO
#

cd `dirname $0` && . ./Configuration


cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

create view mgd.NOM_AccNoRef_View
as
select a.*, l.name as LogicalDB,  
m.name as MGIType,
mt.name as subType,
ma.symbol || ', ' || ma.name as description
from ACC_Accession a, ACC_LogicalDB l, ACC_MGIType m, NOM_Marker ma, MRK_Types mt
where a._MGIType_key = 21
and a._LogicalDB_key = l._LogicalDB_key
and a._MGIType_key = m._MGIType_key
and a._Object_key = ma._Nomen_key
and ma._Marker_Type_key = mt._Marker_Type_key
and not exists (select r.* from ACC_AccessionReference r
where a._Accession_key = r._Accession_key)



;

EOSQL
