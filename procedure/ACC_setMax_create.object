#!/bin/sh

#
# History
#
# lec	08/20/2014
#
# lec	01/18/2006
#	- TR 7182; increased prefixPart to 30
#
#

cd `dirname $0` && . ./Configuration

${PG_MGD_DBSCHEMADIR}/procedure/ACC_setMax_drop.object

cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

CREATE OR REPLACE FUNCTION ACC_setMax (
v_increment int,
v_prefixPart acc_accession.prefixPart%TYPE DEFAULT 'MGI:'
)
RETURNS VOID AS
\$\$


BEGIN

/* Increment the max MGI Accession Number by v_increment */
UPDATE ACC_AccessionMax
SET maxNumericPart = maxNumericPart + v_increment
WHERE prefixPart = v_prefixPart
;


END;
\$\$
LANGUAGE plpgsql;

GRANT EXECUTE ON FUNCTION ACC_setMax(int,varchar) TO public;

COMMENT ON FUNCTION mgd.ACC_setMax(int,varchar) IS 'updates the acc_accessionmax:maxNumericPart field';

EOSQL
