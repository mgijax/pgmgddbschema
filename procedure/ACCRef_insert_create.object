#!/bin/sh

#
# History
#
# lec 03/18/2003
#	- SAO
#

cd `dirname $0` && . ./Configuration

cat - <<EOSQL | ${PG_DBUTILS}/bin/doisql.csh $0

DROP FUNCTION ACCRef_insert();

CREATE OR REPLACE FUNCTION ACCRef_insert (
  accKey int,
  refsKey int
)
RETURNS VOID AS
\$\$

DECLARE
userKey int;


BEGIN

select @userKey = _User_key from MGI_User where login = current_user
;

insert into ACC_AccessionReference
(_Accession_key, _Refs_key, _CreatedBy_key, _ModifiedBy_key)
values(@accKey, @refsKey, @userKey, @userKey)
;






END;
\$\$
LANGUAGE plpgsql;

GRANT EXECUTE ON FUNCTION ACCRef_insert(int,int) TO public;

EOSQL
